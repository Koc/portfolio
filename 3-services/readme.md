Срез из того же проекта "wm-api" (REST-API).

Здесь показан сервисный слой, который по сути framework-agnostic. Стояла задача генерации множества разных отчетов (таблички с данными) на основании разных входных параметров и разных источников данных и рендеринг их в xlsx/html-форматы. Нужно было продумать архитектуру, как это все воедино собрать. Вот, что из этого вышло:

### Терминология

**Входные параметры** (`GenerationRequest`) - какие-то параметры, на основании которых нужно строить отчет. Например, это какая-то дата или несколько дат

**Сгенерированный отчет** (`GeneratedReport`) - модель сгенерированного отчета, по сути это представление таблицы. Состоит из строк (`Row`), каждая из которых, в свою очередь, состоит из ячеек (`Cell`). В ячейках находятся данные `value` (текст, цифры, ...), ячейки имеют свое предназначение `purpose` (заголосок отчета, заголовок колонки, ...), могут занимать несколько колонок и/или строк в случае, если `colspan > 1` и/или `rowspan > 1` соответственно.

**Данные** (`ReportSource`) - саггрегированные данные, по которым удобно строить *сгенерированный отчет*.

**Источник данных** (`ReportSourceProvider`) - источник данных, для генерации отчета. На основании *входных параметров* выдает *данные*, по которым дальше будет генерироваться отчет. Обычно тут происходит обращение к БД через репозитории

**Рендерер** (`Renderer`) - трансформер, который преобразовывает *сгенерированный отчет* в файл (html, xlsx, ...).

Фасад для всего этого - `ReportBuilder`, `GroupReportBuilder` (если нужно генерировать группу из сразу нескольких отчетов).


На этом проекте мы писали в основном функциональные тесты, но пара классов покрыта и юнитами.
Контроллер `GenerateReportAction` еще не готов, он тоже будет универсален - нужные классы `GenerationRequest` будут создаваться автоматом.
